# Us - A Shared Memory Journal (æˆ‘ä»¬çš„æ•…äº‹)

> **GitHub Repository**: [https://github.com/lin-hongkuan/us](https://github.com/lin-hongkuan/us)

![PWA Ready](https://img.shields.io/badge/PWA-Ready-purple?style=flat-square&logo=pwa)
![React](https://img.shields.io/badge/React-19-blue?style=flat-square&logo=react)
![Vite](https://img.shields.io/badge/Vite-6-646CFF?style=flat-square&logo=vite)
![Supabase](https://img.shields.io/badge/Supabase-Realtime-3ECF8E?style=flat-square&logo=supabase)
![Tailwind CSS](https://img.shields.io/badge/Tailwind-3.4-38B2AC?style=flat-square&logo=tailwindcss)
![Capacitor](https://img.shields.io/badge/Capacitor-Android-119EFF?style=flat-square&logo=capacitor)

**Us** æ˜¯ä¸€ä¸ªä¸“ä¸ºæƒ…ä¾£è®¾è®¡çš„å…±äº«å›å¿†æ—¥è®°åº”ç”¨ã€‚å®ƒæä¾›äº†ä¸€ä¸ªæ¸©é¦¨ã€ç§å¯†çš„ç©ºé—´ï¼Œè®©"å¥¹"å’Œ"ä»–"å¯ä»¥åˆ†åˆ«è®°å½•å„è‡ªè§†è§’çš„ç‚¹ç‚¹æ»´æ»´ï¼Œå…±åŒç¼–ç»‡å±äºä¸¤ä¸ªäººçš„ç¾å¥½å›å¿†ã€‚

æ”¯æŒ **PWA** å®‰è£…åˆ°æ¡Œé¢ / æ‰‹æœºä¸»å±å¹•ï¼Œä¹Ÿæ”¯æŒé€šè¿‡ **Capacitor** æ„å»ºä¸ºåŸç”Ÿ Android APKã€‚

### é¢„è§ˆ (Preview)

**ç™»å½•é¡µ** â€” èº«ä»½é€‰æ‹© Â· æ‹çˆ±å¤©æ•° Â· æƒ…è¯è½®æ’­ Â· åŠ¨æ€å¤´åƒ

![ç™»å½•é¡µ](doc/login.png)

**ä¸»é¡µ (æµ…è‰²æ¨¡å¼)** â€” åŒæ æ—¶é—´è½´ Â· è®°å¿†å¡ç‰‡ Â· å¤šå›¾å±•ç¤º

![ä¸»é¡µæµ…è‰²](doc/main-light.png)

**ä¸»é¡µ (æ·±è‰²æ¨¡å¼)** â€” å…¨å±€æš—è‰²ä¸»é¢˜ Â· æ¸å˜è¾¹æ¡† Â· å‘å…‰æ•ˆæœ

![ä¸»é¡µæ·±è‰²](doc/main-dark.png)

**ç¼–è¾‘å™¨** â€” æ–°å»ºå›å¿† Â· å¤šå›¾ä¸Šä¼  Â· èƒŒæ™¯æ¨¡ç³Š

![ç¼–è¾‘å™¨](doc/composer.png)

## âœ¨ ç‰¹æ€§ (Features)

### ğŸ“± å¤šå¹³å°æ”¯æŒ
- **PWA**ï¼šå¯å®‰è£…åˆ°æ‰‹æœºä¸»å±å¹•æˆ–ç”µè„‘æ¡Œé¢ï¼Œéšè—æµè§ˆå™¨åœ°å€æ ï¼Œå…¨å±æ²‰æµ¸ä½“éªŒã€‚
- **Android APK**ï¼šé€šè¿‡ Capacitor æ„å»ºåŸç”Ÿ Android åº”ç”¨ï¼Œæä¾›é¡¹ç›®å†… `scripts/` æ„å»ºè„šæœ¬ã€‚
- **ç¦»çº¿è®¿é—®**ï¼šService Worker é¢„ç¼“å­˜é™æ€èµ„æºï¼ŒSupabase API å’Œå›¾ç‰‡å‡æœ‰è¿è¡Œæ—¶ç¼“å­˜ç­–ç•¥ã€‚

### ğŸ¨ æ²‰æµ¸å¼è§†è§‰ä½“éªŒ
- **åŒè‰²è°ƒä¸»é¢˜**ï¼š
  - ğŸ’— **Her Side**ï¼šæ¸©æš–çš„ç«ç‘°ç²‰è‰²è°ƒï¼Œè±¡å¾æ¸©æŸ”ä¸ç»†è…»ã€‚
  - ğŸ’™ **His Side**ï¼šæ¸…æ–°çš„å¤©ç©ºè“è‰²è°ƒï¼Œè±¡å¾å®½å¹¿ä¸åŒ…å®¹ã€‚
  - æ¡Œé¢ç«¯é‡‡ç”¨åˆ†å±èåˆæ¸å˜ï¼Œç§»åŠ¨ç«¯åˆ‡æ¢æ ‡ç­¾æˆ–å·¦å³æ»‘åŠ¨ã€‚
- **æ·±è‰²æ¨¡å¼**ï¼šè·Ÿéšç³»ç»Ÿåå¥½æˆ–æ‰‹åŠ¨åˆ‡æ¢ï¼Œå…¨å±€ä¸€é”®æš—è‰²ä¸»é¢˜ã€‚
- **åŠ¨æ€æµå…‰èƒŒæ™¯**ï¼š
  - èƒŒæ™¯è‰²å½©éšæ—¶é—´æµåŠ¨ï¼ˆ`animate-gradient`ï¼‰ï¼Œä¸‰ä¸ªè‰²å›¢åš blob ç¼“åŠ¨ã€‚
  - **äº¤äº’å¼å…‰å½±ï¼ˆDesktopï¼‰**ï¼šé¼ æ ‡ç§»åŠ¨æ—¶èƒŒæ™¯è‰²å›¢ä»¥é˜»å°¼åŠ¨ç”»ç¼“æ…¢è·Ÿéšï¼Œè¥é€ å‘¼å¸èˆ¬çš„æ²‰æµ¸æ„Ÿã€‚
  - ç‚¹å‡»å±å¹•ä»»æ„ä½ç½®ï¼ˆå«ç™»å½•é¡µï¼‰è¿¸å‘å¯çˆ±çš„å°æ˜Ÿæ˜Ÿï¼ˆ`ClickStarOverlay`ï¼‰ã€‚
  - çŒ«çˆªè„šå°å›¾æ¡ˆåœ¨èƒŒæ™¯ç¼“æ…¢æ¸¸èµ°ã€‚
- **ç²¾è‡´æ’ç‰ˆ**ï¼š
  - æ ‡é¢˜ **Skranji** å­—ä½“ï¼Œæ­£æ–‡ **Playfair Display** / **Inter**ã€‚
  - çº¹ç†æ–‡å­—æ•ˆæœï¼ˆæ¸å˜ + å™ªç‚¹ + æ‚¬æµ®é˜´å½±ï¼‰ã€‚
- **é¦–å±éª¨æ¶å±**ï¼šReact åŠ è½½å‰æ˜¾ç¤ºçˆ±å¿ƒè·³åŠ¨åŠ¨ç”»ï¼Œæ·±è‰²æ¨¡å¼æ— é—ªçƒã€‚
- **ç§»åŠ¨ç«¯æ€§èƒ½ä¼˜åŒ–**ï¼šè‡ªåŠ¨é™çº§ backdrop-blurã€ç¦ç”¨ blob åŠ¨ç”»ã€å‡å°‘æ˜Ÿæ˜Ÿæ•°é‡ã€‚

### ğŸ’ æ ¸å¿ƒåŠŸèƒ½
- **åŒè§†è§’è®°å½•**ï¼šä»¥"å¥¹"æˆ–"ä»–"çš„èº«ä»½å‘å¸ƒå›å¿†ï¼Œæ¡Œé¢ç«¯å·¦å³åˆ†æ åŒæ—¶å±•ç¤ºã€‚
- **å¤šå›¾ä¸Šä¼ **ï¼šæ¯æ¡å›å¿†æœ€å¤š 9 å¼ ç…§ç‰‡ï¼Œæ”¯æŒç¼©ç•¥å›¾åˆ—è¡¨ã€ä¸»å›¾å±•å¼€/æ”¶èµ·ã€å…¨å±çœ‹å›¾ï¼ˆå·¦å³åˆ‡æ¢ï¼‰ã€ä¸‹è½½ã€‚
  - Supabase Storage ä¸Šä¼ åŸå›¾ï¼ˆæ— å‹ç¼©ï¼‰ï¼ŒBase64 å…œåº•ã€‚
  - `LazyImage` ç»„ä»¶ç»Ÿä¸€æ‡’åŠ è½½ï¼šIntersectionObserver è§†å£æ£€æµ‹ã€éª¨æ¶å± shimmerã€fallback å›é€€ã€æŒ‡æ•°é€€é¿é‡è¯•ã€‚
  - æ”¯æŒ Supabase Storage render API ç”Ÿæˆç¼©ç•¥å›¾ URLã€‚
- **å›å¿†ç®¡ç†**ï¼šæ”¯æŒç¼–è¾‘æ–‡å­—ã€å¢åˆ å›¾ç‰‡ã€åˆ é™¤æ•´æ¡å›å¿†ã€‚ä»…ä½œè€…å¯æ“ä½œã€‚
- **æ—¶é—´è½´å±•ç¤º**ï¼šæŒ‰æ—¶é—´å€’åºæ’åˆ—ï¼Œæ¡Œé¢ç«¯å¸¦å·¦ä¾§æ—¶é—´çº¿åœ†ç‚¹è£…é¥°ã€‚

### âš¡ ä¸‰å±‚ç¼“å­˜ + å®æ—¶åŒæ­¥
- **Cache-First åŠ è½½**ï¼šå†…å­˜ç¼“å­˜ï¼ˆæ¯«ç§’çº§ï¼‰â†’ IndexedDBï¼ˆ10ms çº§ï¼‰â†’ Supabase äº‘ç«¯ã€‚é¦–æ¬¡è®¿é—®åå†æ¬¡æ‰“å¼€ç¬é—´åŠ è½½ã€‚
- **åå°é™é»˜åŒæ­¥**ï¼šåŠ è½½ç¼“å­˜åï¼Œåå°è‡ªåŠ¨ä¸äº‘ç«¯å¯¹æ¯”å¹¶å¢é‡æ›´æ–°ï¼Œå¸¦ AbortController è¶…æ—¶æ§åˆ¶å’Œæœ€å°é—´éš”èŠ‚æµã€‚
- **Supabase Realtime è®¢é˜…**ï¼šç›‘å¬ INSERT / UPDATE / DELETEï¼Œå¯¹æ–¹å‘å¸ƒå›å¿†æ—¶è‡ªåŠ¨å‡ºç°åœ¨ä½ çš„åˆ—è¡¨ä¸­ã€‚

### ğŸ‘« åŒäººåœ¨çº¿çŠ¶æ€ (Presence)
- åŸºäº Supabase Realtime Presenceï¼Œæ£€æµ‹åŒæ–¹æ˜¯å¦åŒæ—¶åœ¨çº¿ã€‚
- **ä¸Šçº¿æ—¶**ï¼šå±å¹•ä¸­å¿ƒçˆ†å‘çˆ±å¿ƒç²’å­ + å…‰æ³¢æ‰©æ•£ + æ¸å˜æ—‹è½¬è¾¹æ¡†å¡ç‰‡ + æç¤ºéŸ³ã€‚
- **åœ¨çº¿ä¸­**ï¼šåº•éƒ¨æ‚¬æµ®å¡ç‰‡æ˜¾ç¤ºåŒå¤´åƒï¼ˆå¿ƒè·³çˆ±å¿ƒè¿çº¿ï¼‰ã€ç”œèœœæ–‡æ¡ˆã€å¾®ç²’å­ä¸Šæµ®åŠ¨æ•ˆã€‚
- **ä¸‹çº¿æ—¶**ï¼šæ¸©æŸ”çš„å‘Šåˆ«æ–‡æ¡ˆï¼Œå¡ç‰‡è‡ªåŠ¨ 3.5s åæ¶ˆå¤±ã€‚
- æ”¯æŒæŒ‡æ•°é€€é¿é‡è¿ï¼ˆæœ€å¤š 5 æ¬¡ï¼‰ã€å¿ƒè·³ä¿æ´»ã€é¡µé¢å¯è§æ€§æ¢å¤ trackã€‚

### ğŸ”Š å£°éŸ³åé¦ˆ
- åŸºäº Web Audio APIï¼Œæ— å¤–éƒ¨éŸ³é¢‘æ–‡ä»¶ã€‚
- ä¸åŒæ“ä½œå¯¹åº”ä¸åŒéŸ³æ•ˆï¼šHer é«˜é¢‘ä¸Šæ‰¬ã€Him ä½é¢‘ä¸‹æ²‰ã€é€šç”¨ç‚¹å‡»ã€å°ç« ç›–ç« ã€åˆ·æ–°åŠ è½½æ¸è¿›ã€åŠ è½½å®ŒæˆåŒéŸ³é˜¶ã€æˆåŠŸä¸‰è¿éŸ³ã€‚

### ğŸ® å½©è›‹ä¸è¶£å‘³
- **é‡åŠ›æ¨¡å¼**ï¼šåœ¨ç¼–è¾‘å™¨ä¸­è¾“å…¥ `1104` å‘é€ï¼Œæ‰€æœ‰è®°å¿†å¡ç‰‡å˜æˆ Matter.js ç‰©ç†åˆšä½“ï¼Œåœ¨é‡åŠ›ä¸‹å è½å¼¹è·³ï¼Œå¯æ‹–æ‹½äº¤äº’ã€‚
- **2048 Emoji**ï¼šåœ¨ç¼–è¾‘å™¨ä¸­è¾“å…¥ `2005` å‘é€ï¼Œæ‰“å¼€åŠ¨ç‰©è¡¨æƒ…ç‰ˆ 2048 æ»‘åŠ¨æ‹¼å›¾æ¸¸æˆã€‚
- **æ‹çˆ±å­˜é’±ç½ (PiggyBank)**ï¼šè®°å¿†æ•°é‡ä½œä¸º"çˆ±å¿ƒé‡‘å¸"ï¼Œè¾¾åˆ°ç›®æ ‡ï¼ˆé»˜è®¤ 52ï¼‰å¼¹å‡ºä¸‡èƒ½å…‘æ¢åˆ¸å¥–åŠ±ã€‚
- **ã€Œä½ ä»Šå¤©æƒ³æˆ‘äº†å—ï¼Ÿã€å¯¹è¯æ¡†**ï¼šç‚¹å‡»æ˜Ÿæ˜Ÿå…¬å‘ŠæŒ‰é’®è§¦å‘ï¼Œå¯çˆ±çš„äº¤äº’é—®ç­”ã€‚
- **ç‰¹æ®Šæ—¥æœŸæ£€æµ‹**ï¼šæ‹çˆ±å¤©æ•°æ•´ç™¾ï¼ˆ100ã€200â€¦520ï¼‰æˆ–çºªå¿µæ—¥å½“å¤©æ˜¾ç¤ºä¸“å±åº†ç¥åŠ¨ç”»ã€‚
- **æ·±å¤œæ¨¡å¼**ï¼šå‡Œæ™¨ 1-6 ç‚¹è®¿é—®æ—¶é¡¶æ å‡ºç°çŒ«å¤´é¹°æŒ‰é’®ï¼Œæ¸©é¦¨æé†’æ³¨æ„ä¼‘æ¯ã€‚

### ğŸ¾ ç™»å½•é¡µ
- å¤§å· "Us." çº¹ç† Logoï¼Œå¸¦å‘¼å¸ç¼©æ”¾åŠ¨ç”»ã€‚
- æ‹çˆ±å¤©æ•°æ»šåŠ¨è®¡æ•°ï¼ˆç¼“å‡ºåŠ¨ç”»ï¼‰ã€‚
- 30+ æ¡æ‹çˆ±æƒ…è¯è½®æ’­ï¼ˆç‚¹å‡»åˆ‡æ¢ï¼Œç¬¬äºŒè¡Œå»¶è¿Ÿæ˜¾ç¤ºï¼‰ã€‚
- 32 ç»„åŠ¨æ€å¤´åƒå¯¹å¶ï¼Œæ¯ 10 åˆ†é’Ÿè‡ªåŠ¨è½®æ¢ï¼Œé™„å¸¦å°å¯“æ„ã€‚
- å¡ç‰‡æµ®åŠ¨ã€å…‰å¸¦æ‰«è¿‡ã€å™ªç‚¹å‘¼å¸çº¹ç†ã€‚

### ğŸ§© ç»„ä»¶æ¶æ„ï¼ˆé‡æ„åï¼‰
åº”ç”¨æŒ‰é˜¶æ®µæ‹†åˆ†ä¸ºç‹¬ç«‹ç»„ä»¶ï¼Œæ ¸å¿ƒè§†å›¾æ‡’åŠ è½½ï¼š

| é˜¶æ®µ / åŠŸèƒ½ | ç»„ä»¶ | è¯´æ˜ |
|---|---|---|
| ç™»å½•é€‰äºº | `LoginPhase` | èº«ä»½é€‰æ‹©é¡µ |
| è¿‡æ¸¡åŠ è½½ | `TransitionPhase` | ç¯å½¢è¿›åº¦æ¡ + å¤´åƒ + èƒŒæ™¯æ¸å…¥æ¸å‡º |
| é¡¶æ  | `Header` | å“ç‰Œæ ‡é¢˜ã€æ ‡ç­¾åˆ‡æ¢ã€è®°å½•æŒ‰é’®ã€æ·±è‰²æ¨¡å¼ã€é€€å‡º |
| ä¸»å†…å®¹ | `MainPhase` | åŒæ è®°å¿†åˆ—è¡¨ã€æ»‘åŠ¨åˆ‡æ¢ã€æ»šåŠ¨éšè— Headerã€é•¿æŒ‰åˆ·æ–°ç¼“å­˜ |
| è®°å¿†å¡ç‰‡ | `MemoryCard` | æ­£æ–‡/å¤šå›¾å±•ç¤ºã€ç¼–è¾‘ã€åˆ é™¤ã€å…¨å±çœ‹å›¾ï¼ŒReact.memo ä¼˜åŒ– |
| ç¼–è¾‘å™¨ | `Composer` (lazy) | æ–°å»ºå›å¿†æ¨¡æ€æ¡†ï¼Œæ”¯æŒå¤šå›¾ä¸Šä¼  |
| å›¾ç‰‡ | `LazyImage` | ç»Ÿä¸€æ‡’åŠ è½½ã€éª¨æ¶å±ã€fallbackã€é‡è¯• |
| åœ¨çº¿çŠ¶æ€ | `PresenceIndicator` | åŒäºº Presence å¡ç‰‡ + çˆ†å‘ç²’å­ |
| æ‰“å­—æœº | `TypewriterText` | é€å­—æ‰“å­—æ•ˆæœ |
| æ˜Ÿæ˜Ÿç‰¹æ•ˆ | `ClickStarOverlay` | å…¨å±€ç‚¹å‡»æ˜Ÿæ˜Ÿï¼ŒCustomEvent é©±åŠ¨ |
| å­˜é’±ç½ | `PiggyBank` (lazy) | æ¸¸æˆåŒ–è®¡æ•°å™¨ |
| é‡åŠ›æ¨¡å¼ | `GravityMode` (lazy) | Matter.js ç‰©ç†å½©è›‹ |
| 2048 | `Game2048` (lazy) | åŠ¨ç‰©è¡¨æƒ… 2048 æ¸¸æˆå½©è›‹ |

### ğŸ“¦ å…¨å±€çŠ¶æ€ (Context)
`AppContext` ç®¡ç†ï¼š
- å½“å‰ç”¨æˆ·ï¼ˆ`currentUser`ï¼‰
- æ·±è‰²æ¨¡å¼ï¼ˆ`darkMode`ï¼Œè‡ªåŠ¨æŒä¹…åŒ–åˆ° localStorageï¼‰
- å…¨å±€éŸ³æ•ˆï¼ˆ`playClickSound` / `playRefreshSound` / `playLoadCompleteSound` / `playSuccessSound`ï¼‰
- å…¨å±€ `mousedown` ç›‘å¬ï¼Œä»»ä½•å¸¦ `data-sound` å±æ€§çš„å…ƒç´ ç‚¹å‡»è‡ªåŠ¨å‘å£°

## ğŸ› ï¸ æŠ€æœ¯æ ˆ (Tech Stack)

| ç±»åˆ« | æŠ€æœ¯ |
|---|---|
| **å‰ç«¯æ¡†æ¶** | [React 19](https://react.dev/) |
| **æ„å»ºå·¥å…·** | [Vite 6](https://vitejs.dev/) + esbuild å‹ç¼© + æ‰‹åŠ¨ chunk åˆ†åŒ… |
| **PWA** | [vite-plugin-pwa](https://vite-pwa-org.netlify.app/)ï¼ˆWorkbox è¿è¡Œæ—¶ç¼“å­˜ç­–ç•¥ï¼‰ |
| **æ ·å¼** | [Tailwind CSS 3.4](https://tailwindcss.com/) + è‡ªå®šä¹‰ CSS åŠ¨ç”» |
| **å­—ä½“** | Google Fontsï¼ˆSkranji Â· Playfair Display Â· Interï¼‰ |
| **åç«¯/å­˜å‚¨** | [Supabase](https://supabase.com/)ï¼ˆPostgreSQL + Storage + Realtimeï¼‰ |
| **ç¼“å­˜** | ä¸‰å±‚ï¼šå†…å­˜ â†’ IndexedDB â†’ Supabase äº‘ç«¯ |
| **ç‰©ç†å¼•æ“** | [Matter.js](https://brm.io/matter-js/) |
| **æ—¥æœŸå¤„ç†** | [date-fns](https://date-fns.org/) |
| **å›¾æ ‡** | [Lucide React](https://lucide.dev/) |
| **åŸç”Ÿæ‰“åŒ…** | [Capacitor](https://capacitorjs.com/)ï¼ˆAndroidï¼‰ |

## ğŸš€ å¿«é€Ÿå¼€å§‹ (Getting Started)

### 1. å…‹éš†é¡¹ç›®
```bash
git clone https://github.com/lin-hongkuan/us.git
cd us
```

### 2. å®‰è£…ä¾èµ–
```bash
npm install
```

### 3. å¯åŠ¨å¼€å‘æœåŠ¡å™¨
```bash
npm run dev
```
è®¿é—® `http://localhost:3000` å³å¯é¢„è§ˆï¼ˆå« PWA å¼€å‘æ¨¡å¼ï¼‰ã€‚

### 4. æ„å»ºç”Ÿäº§ç‰ˆæœ¬
```bash
npm run build
npm run preview   # æœ¬åœ°é¢„è§ˆæ„å»ºäº§ç‰©
```

### 5. æ„å»º Android APKï¼ˆå¯é€‰ï¼‰
```bash
# Windows PowerShell
.\scripts\build-android.ps1

# æˆ– CMD
scripts\build-android.bat
```
éœ€è¦å…ˆå®‰è£… Android Studio å¹¶é…ç½® Capacitorã€‚è¯¦è§ `capacitor.config.ts`ã€‚

## ğŸ“² PWA å®‰è£…æŒ‡å—

### iOS (Safari)
1. åœ¨ Safari ä¸­æ‰“å¼€ç½‘ç«™ã€‚
2. ç‚¹å‡»åº•éƒ¨çš„"åˆ†äº«"æŒ‰é’®ã€‚
3. å‘ä¸‹æ»‘åŠ¨å¹¶é€‰æ‹©"æ·»åŠ åˆ°ä¸»å±å¹•"ã€‚

### Android (Chrome)
1. åœ¨ Chrome ä¸­æ‰“å¼€ç½‘ç«™ã€‚
2. ç‚¹å‡»å³ä¸Šè§’èœå•ï¼ˆä¸‰ä¸ªç‚¹ï¼‰ã€‚
3. é€‰æ‹©"å®‰è£…åº”ç”¨"æˆ–"æ·»åŠ åˆ°ä¸»å±å¹•"ã€‚

### Desktop (Chrome/Edge)
1. åœ¨æµè§ˆå™¨åœ°å€æ å³ä¾§ç‚¹å‡»"å®‰è£…"å›¾æ ‡ã€‚
2. ç¡®è®¤å®‰è£…åï¼Œåº”ç”¨å°†ä»¥ç‹¬ç«‹çª—å£è¿è¡Œã€‚

## ğŸ“– ä½¿ç”¨æ•™ç¨‹ (User Guide)

### é¦–æ¬¡ä½¿ç”¨

1. **é€‰æ‹©èº«ä»½**ï¼šè¿›å…¥ç™»å½•é¡µï¼Œç‚¹å‡» ğŸ’— **å¯çˆ±å©·** æˆ– ğŸ’™ **å°ç”·å¥´** é€‰æ‹©èº«ä»½ã€‚
2. è§‚çœ‹è¿‡æ¸¡åŠ¨ç”»ï¼ˆç¯å½¢è¿›åº¦ + å¤´åƒï¼‰ï¼Œæ•°æ®åŠ è½½å®Œæˆåè¿›å…¥ä¸»ç•Œé¢ã€‚

### åˆ›å»ºå›å¿†

1. ç‚¹å‡»å³ä¸Šè§’æ¸å˜è‰² âœï¸ **Record** æŒ‰é’®æ‰“å¼€ç¼–è¾‘å™¨ã€‚
2. è¾“å…¥æ–‡å­—å†…å®¹ã€‚
3. **æ·»åŠ ç…§ç‰‡**ï¼ˆå¯é€‰ï¼‰ï¼šç‚¹å‡»"æ·»åŠ ç…§ç‰‡"æŒ‰é’®ï¼Œé€‰æ‹©å›¾ç‰‡ï¼ˆæ¯å¼ æœ€å¤§ 50MBï¼Œæœ€å¤š 9 å¼ ï¼‰ã€‚
4. ç‚¹å‡» **è®°å½•ç¾å¥½** æŒ‰é’®ä¿å­˜ï¼Œå‡ºç°å°ç« ç›–ç« åŠ¨ç”»ã€‚

### ç®¡ç†å›å¿†

- **ç¼–è¾‘**ï¼šæ‚¬æµ®å¡ç‰‡å‡ºç° âœï¸ æŒ‰é’®ï¼Œç‚¹å‡»è¿›å…¥ç¼–è¾‘æ¨¡å¼ï¼Œå¯ä¿®æ”¹æ–‡å­—ã€å¢åˆ å›¾ç‰‡ã€‚
- **åˆ é™¤**ï¼šæ‚¬æµ®å¡ç‰‡å‡ºç° ğŸ—‘ï¸ æŒ‰é’®ï¼Œç¡®è®¤ååˆ é™¤ã€‚
- **æŸ¥çœ‹ç…§ç‰‡**ï¼šç‚¹å‡»å›¾ç‰‡å±•å¼€/æ”¶èµ·ï¼›ç‚¹å‡»å³ä¸Šè§’å…¨å±æŒ‰é’®æŸ¥çœ‹åŸå›¾ï¼Œå¤šå¼ æ—¶å·¦å³åˆ‡æ¢ã€‚
- **ä¸‹è½½ç…§ç‰‡**ï¼šæ‚¬æµ®å›¾ç‰‡å³ä¸‹è§’å‡ºç° â¬‡ï¸ ä¸‹è½½æŒ‰é’®ã€‚

### åˆ‡æ¢è§†è§’

- **æ¡Œé¢ç«¯**ï¼šå·¦æ "å¥¹çš„æ—¥è®°"ï¼Œå³æ "ä»–çš„æ—¥è®°"ï¼Œé¼ æ ‡è¿›å…¥ä¸€ä¾§æ—¶èƒŒæ™¯è‰²è°ƒç¼“æ…¢è¿‡æ¸¡ã€‚
- **ç§»åŠ¨ç«¯**ï¼šé¡¶éƒ¨æ ‡ç­¾åˆ‡æ¢æˆ–å·¦å³æ»‘åŠ¨ã€‚

### éšè—å½©è›‹

- ç¼–è¾‘å™¨è¾“å…¥ `1104` å‘é€ â†’ é‡åŠ›æ¨¡å¼ï¼ˆç‰©ç†å¡ç‰‡å è½ï¼‰
- ç¼–è¾‘å™¨è¾“å…¥ `2005` å‘é€ â†’ 2048 Emoji æ¸¸æˆ
- é•¿æŒ‰é¡µé¢é¡¶éƒ¨å¤´åƒ 3 ç§’ â†’ æ¸…é™¤æœ¬åœ°ç¼“å­˜å¹¶å¼ºåˆ¶åˆ·æ–°

### æƒé™è¯´æ˜

- æ¯ä¸ªäººåªèƒ½ç¼–è¾‘å’Œåˆ é™¤è‡ªå·±å‘å¸ƒçš„å›å¿†ã€‚
- å¯ä»¥æŸ¥çœ‹å¯¹æ–¹å‘å¸ƒçš„æ‰€æœ‰å›å¿†ã€‚
- åŒæ–¹åŒæ—¶åœ¨çº¿æ—¶å³ä¸‹è§’å‡ºç°ç”œèœœæç¤ºå¡ç‰‡ã€‚

## ğŸ’¾ æ•°æ®å­˜å‚¨è¯´æ˜

### Supabase äº‘ç«¯å­˜å‚¨ï¼ˆæ¨èï¼‰
- æ•°æ®äº‘ç«¯ä¿å­˜ï¼Œå¯è·¨è®¾å¤‡è®¿é—®ã€‚
- ä¸‰å±‚ç¼“å­˜ç­–ç•¥ä¿è¯åŠ è½½é€Ÿåº¦ã€‚
- Supabase Realtime å®æ—¶åŒæ­¥ã€‚
- Storage å­˜å‚¨åŸå›¾ï¼Œæ”¯æŒ render API ç”Ÿæˆç¼©ç•¥å›¾ã€‚

### LocalStorage æœ¬åœ°å­˜å‚¨ï¼ˆå¤‡ç”¨ï¼‰
- æ— éœ€é…ç½®ï¼Œå³å¼€å³ç”¨ã€‚
- ç…§ç‰‡ä»¥ Base64 ä¿å­˜ï¼Œæµè§ˆå™¨é€šå¸¸é™åˆ¶ 5-10MBã€‚
- æ•°æ®ä»…ä¿å­˜åœ¨å½“å‰æµè§ˆå™¨ï¼Œæ— æ³•è·¨è®¾å¤‡åŒæ­¥ã€‚

## ğŸ—„ï¸ åç«¯é…ç½® (Supabase Setup)

æœ¬é¡¹ç›®é»˜è®¤æ”¯æŒ LocalStorageï¼Œä½†ä¸ºäº†æ•°æ®æŒä¹…åŒ–å’Œç…§ç‰‡å­˜å‚¨ï¼Œ**å¼ºçƒˆå»ºè®®é…ç½® Supabase**ã€‚

### æ­¥éª¤ 1: åˆ›å»ºé¡¹ç›®å¹¶é…ç½®æ•°æ®åº“

1. ç™»å½• [Supabase](https://supabase.com/) åˆ›å»ºä¸€ä¸ªæ–°é¡¹ç›®ã€‚
2. è¿›å…¥é¡¹ç›®çš„ **SQL Editor**ï¼Œè¿è¡Œ `supabase_setup.sql` ä¸­çš„è„šæœ¬ä»¥åˆ›å»ºè¡¨ç»“æ„å’Œå®‰å…¨ç­–ç•¥ã€‚
   - åŠ¡å¿…è¿è¡Œå®Œæ•´çš„ SQL è„šæœ¬ï¼Œç‰¹åˆ«æ˜¯ `Enable update access` ç­–ç•¥ï¼Œå¦åˆ™æ— æ³•ä¿®æ”¹å›å¿†ã€‚

### æ­¥éª¤ 2: é…ç½® Storageï¼ˆç…§ç‰‡å­˜å‚¨ï¼‰

#### 2.1 åˆ›å»º Storage Bucket
1. åœ¨ Supabase æ§åˆ¶å°å·¦ä¾§èœå•ç‚¹å‡» **Storage**
2. ç‚¹å‡» **New bucket**
3. è¾“å…¥åç§°ï¼š`memory-images`
4. **å‹¾é€‰** "Public bucket"
5. ç‚¹å‡» **Create bucket**

#### 2.2 è®¾ç½®è®¿é—®ç­–ç•¥
ç‚¹å‡» `memory-images` bucket â†’ **Policies**ï¼Œåˆ›å»ºä»¥ä¸‹ 3 ä¸ªç­–ç•¥ï¼š

| ç­–ç•¥å | æ“ä½œ | æ¡ä»¶ |
|---|---|---|
| Allow public uploads | INSERT | `bucket_id = 'memory-images'` |
| Allow public read | SELECT | `bucket_id = 'memory-images'` |
| Allow public delete | DELETE | `bucket_id = 'memory-images'` |

### æ­¥éª¤ 3: é…ç½®ç¯å¢ƒå˜é‡

1. å¤åˆ¶ `.env.example` ä¸º `.env`ï¼š
```bash
cp .env.example .env
```

2. åœ¨ `.env` ä¸­å¡«å…¥ä½ çš„ Supabase é¡¹ç›® URL å’Œ anon keyï¼ˆåœ¨ Supabase é¡¹ç›®è®¾ç½® â†’ API ä¸­è·å–ï¼‰ï¼š
```env
VITE_SUPABASE_URL=https://your-project-id.supabase.co
VITE_SUPABASE_KEY=your-anon-key
```

3. é‡å¯å¼€å‘æœåŠ¡å™¨å³å¯ã€‚

> `.env` å·²åŠ å…¥ `.gitignore`ï¼Œä¸ä¼šè¢«æäº¤åˆ°ä»“åº“ã€‚ä»… `.env.example` ä½œä¸ºæ¨¡æ¿æäº¤ã€‚

## ğŸ“‚ é¡¹ç›®ç»“æ„ (Project Structure)

```
.
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ components/              # React ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ LoginPhase.tsx       # ç™»å½•é€‰äººé¡µ
â”‚   â”‚   â”œâ”€â”€ TransitionPhase.tsx  # è¿‡æ¸¡åŠ è½½åŠ¨ç”»
â”‚   â”‚   â”œâ”€â”€ Header.tsx           # é¡¶æ ï¼ˆå“ç‰Œ/æ ‡ç­¾/æŒ‰é’®ï¼‰
â”‚   â”‚   â”œâ”€â”€ MainPhase.tsx        # ä¸»å†…å®¹åŒæ å¸ƒå±€
â”‚   â”‚   â”œâ”€â”€ MemoryCard.tsx       # è®°å¿†å¡ç‰‡ï¼ˆå¤šå›¾/ç¼–è¾‘/åˆ é™¤ï¼‰
â”‚   â”‚   â”œâ”€â”€ Composer.tsx         # æ–°å»ºå›å¿†ç¼–è¾‘å™¨ï¼ˆlazyï¼‰
â”‚   â”‚   â”œâ”€â”€ LazyImage.tsx        # å›¾ç‰‡æ‡’åŠ è½½ï¼ˆéª¨æ¶å±/é‡è¯•/fallbackï¼‰
â”‚   â”‚   â”œâ”€â”€ PresenceIndicator.tsx # åŒäººåœ¨çº¿çŠ¶æ€æŒ‡ç¤ºå™¨
â”‚   â”‚   â”œâ”€â”€ ClickStarOverlay.tsx # å…¨å±€ç‚¹å‡»æ˜Ÿæ˜Ÿç‰¹æ•ˆ
â”‚   â”‚   â”œâ”€â”€ TypewriterText.tsx   # æ‰“å­—æœºæ–‡å­—æ•ˆæœ
â”‚   â”‚   â”œâ”€â”€ PiggyBank.tsx        # æ‹çˆ±å­˜é’±ç½ï¼ˆlazyï¼‰
â”‚   â”‚   â”œâ”€â”€ GravityMode.tsx      # ç‰©ç†é‡åŠ›æ¨¡å¼ï¼ˆlazyï¼‰
â”‚   â”‚   â””â”€â”€ Game2048.tsx         # 2048 æ¸¸æˆï¼ˆlazyï¼‰
â”‚   â”œâ”€â”€ context/
â”‚   â”‚   â””â”€â”€ AppContext.tsx        # å…¨å±€çŠ¶æ€ï¼ˆç”¨æˆ·/æš—è‰²/éŸ³æ•ˆï¼‰
â”‚   â”œâ”€â”€ config/
â”‚   â”‚   â””â”€â”€ constants.ts         # å¸¸é‡ï¼ˆæƒ…è¯/èµ·å§‹æ—¥æœŸ/æ˜Ÿæ˜Ÿé…ç½®ï¼‰
â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”œâ”€â”€ storageService.ts    # å­˜å‚¨æœåŠ¡ï¼ˆCRUD/å›¾ç‰‡/ç¼“å­˜/Realtimeï¼‰
â”‚   â”‚   â”œâ”€â”€ cacheService.ts      # ä¸‰å±‚ç¼“å­˜ï¼ˆå†…å­˜/IndexedDB/åŒæ­¥äº‹ä»¶ï¼‰
â”‚   â”‚   â””â”€â”€ presenceService.ts   # åœ¨çº¿çŠ¶æ€æœåŠ¡ï¼ˆSupabase Presenceï¼‰
â”‚   â”œâ”€â”€ App.tsx                  # ä¸»åº”ç”¨ï¼ˆé˜¶æ®µè·¯ç”±/å…¨å±€å¸ƒå±€ï¼‰
â”‚   â”œâ”€â”€ index.tsx                # å…¥å£æ–‡ä»¶
â”‚   â”œâ”€â”€ index.css                # å…¨å±€æ ·å¼/åŠ¨ç”»å…³é”®å¸§
â”‚   â””â”€â”€ types.ts                 # ç±»å‹å®šä¹‰/å¤´åƒé…å¯¹/æ›´æ–°å…¬å‘Š
â”œâ”€â”€ scripts/
â”‚   â”œâ”€â”€ export_memories.js       # è®°å¿†å¯¼å‡ºè„šæœ¬
â”‚   â”œâ”€â”€ build-android.ps1        # Android æ„å»ºè„šæœ¬ (PowerShell)
â”‚   â”œâ”€â”€ build-android.bat        # Android æ„å»ºè„šæœ¬ (CMD)
â”‚   â””â”€â”€ generate-android-keystore.ps1  # ç­¾åå¯†é’¥ç”Ÿæˆ
â”œâ”€â”€ index.html                   # HTML å…¥å£ï¼ˆéª¨æ¶å±/æš—è‰²é¢„åŠ è½½ï¼‰
â”œâ”€â”€ supabase_setup.sql           # æ•°æ®åº“åˆå§‹åŒ–è„šæœ¬
â”œâ”€â”€ capacitor.config.ts          # Capacitor Android é…ç½®
â”œâ”€â”€ tailwind.config.js           # Tailwind CSS é…ç½®
â”œâ”€â”€ vite.config.ts               # Vite + PWA + åˆ†åŒ…é…ç½®
â”œâ”€â”€ tsconfig.json                # TypeScript é…ç½®
â””â”€â”€ package.json                 # é¡¹ç›®ä¾èµ–
```

## ğŸ”§ æ€§èƒ½ä¼˜åŒ–

- **ä»£ç åˆ†å‰²**ï¼šComposer / PiggyBank / GravityMode / Game2048 ä½¿ç”¨ `React.lazy` æŒ‰éœ€åŠ è½½ã€‚Vite `manualChunks` å°† reactã€supabaseã€matter-jsã€date-fnsã€lucide-react åˆ†åŒ…ã€‚
- **ä¸‰å±‚ç¼“å­˜**ï¼šå†…å­˜ â†’ IndexedDB â†’ äº‘ç«¯ï¼ŒCache-First ç­–ç•¥ä¿è¯ç¬é—´åŠ è½½ã€‚
- **å›¾ç‰‡æ‡’åŠ è½½**ï¼š`LazyImage` åŸºäº IntersectionObserverï¼Œæ”¯æŒ `loading="lazy"` + `decoding="async"`ã€‚æ‰¹é‡é¢„åŠ è½½å¹¶å‘é™åˆ¶ä¸º 3ã€‚
- **æ¸²æŸ“ä¼˜åŒ–**ï¼š`React.memo` + è‡ªå®šä¹‰ `areEqual` æ¯”è¾ƒå‡½æ•°ï¼›`useMemo` / `useCallback` é¿å…ä¸å¿…è¦çš„é‡æ¸²æŸ“ã€‚`content-visibility: auto` è™šæ‹ŸåŒ–é•¿åˆ—è¡¨ã€‚
- **åŠ¨ç”»é™çº§**ï¼š`prefers-reduced-motion` å…¨å±€ç¦ç”¨åŠ¨ç”»ï¼›ç§»åŠ¨ç«¯é™ä½ blurã€ç¦ç”¨ blobã€å‡å°‘æ˜Ÿæ˜Ÿï¼›480px ä»¥ä¸‹è¿›ä¸€æ­¥ç²¾ç®€ã€‚
- **PWA ç¼“å­˜**ï¼šWorkbox è¿è¡Œæ—¶ç¼“å­˜ Supabase APIï¼ˆNetworkFirst 3s è¶…æ—¶ï¼‰ã€å›¾ç‰‡ï¼ˆCacheFirst 30 å¤©ï¼‰ã€å­—ä½“ï¼ˆCacheFirst 1 å¹´ï¼‰ã€‚
- **DNS é¢„è§£æ + é¢„è¿æ¥**ï¼š`index.html` ä¸­é¢„è§£æ Supabase å’Œ Google Fonts åŸŸåã€‚
- **ä¾èµ–é¢„æ„å»º**ï¼šVite `optimizeDeps.include` é¢„ç¼–è¯‘å¸¸ç”¨ä¾èµ–ã€‚

## ğŸŒ éƒ¨ç½² (Deployment)

### GitHub Pages
é¡¹ç›®å·²é…ç½® `base: './'`ï¼Œé€‚åˆéƒ¨ç½²åˆ° GitHub Pagesã€‚

1. æ„å»ºé¡¹ç›®ï¼š`npm run build`
2. å°† `dist` æ–‡ä»¶å¤¹æ¨é€åˆ° `gh-pages` åˆ†æ”¯ï¼Œæˆ–ä½¿ç”¨ GitHub Actions è‡ªåŠ¨éƒ¨ç½²ã€‚

### Android
é€šè¿‡ Capacitor æ„å»º Android APKï¼š
```bash
npm run build
npx cap sync android
# åœ¨ Android Studio ä¸­æ‰“å¼€ android/ ç›®å½•å¹¶æ„å»º
```

## ğŸ¤ è´¡çŒ® (Contributing)

æ¬¢è¿æäº¤ Issue æˆ– Pull Request æ¥æ”¹è¿›è¿™ä¸ªé¡¹ç›®!

## ğŸ“„ è®¸å¯è¯ (License)

MIT License
